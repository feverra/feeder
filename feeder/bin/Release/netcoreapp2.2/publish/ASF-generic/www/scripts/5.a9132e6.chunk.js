(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{183:function(t,e,s){"use strict";var n=s(184),o="Copy to clipboard: #{key}, Enter";t.exports=function(t,e){var s,r,i,a,c,u,l=!1;e||(e={}),s=e.debug||!1;try{if(i=n(),a=document.createRange(),c=document.getSelection(),(u=document.createElement("span")).textContent=t,u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",function(s){s.stopPropagation(),e.format&&(s.preventDefault(),s.clipboardData.clearData(),s.clipboardData.setData(e.format,t))}),document.body.appendChild(u),a.selectNodeContents(u),c.addRange(a),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");l=!0}catch(m){s&&console.error("unable to copy using execCommand: ",m),s&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),l=!0}catch(m){s&&console.error("unable to copy using clipboardData: ",m),s&&console.error("falling back to prompt"),r=function(t){var e=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}("message"in e?e.message:o),window.prompt(r,t)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(a):c.removeAllRanges()),u&&document.body.removeChild(u),i()}return l}},184:function(t,e){t.exports=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,s=[],n=0;n<t.rangeCount;n++)s.push(t.getRangeAt(n));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||s.forEach(function(e){t.addRange(e)}),e&&e.focus()}}},212:function(t,e,s){var n=s(297);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,s(5).default)("48e39a63",n,!1,{})},213:function(t,e,s){var n=s(299);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,s(5).default)("fad4b366",n,!1,{})},214:function(t,e,s){var n=s(301);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,s(5).default)("172ecdc2",n,!1,{})},215:function(t,e,s){var n=s(303);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,s(5).default)("17ab0a4d",n,!1,{})},216:function(t,e,s){var n=s(305);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,s(5).default)("141c8af4",n,!1,{})},296:function(t,e,s){"use strict";var n=s(212);s.n(n).a},297:function(t,e,s){(t.exports=s(4)(!1)).push([t.i,".bgr__no-keys{font-weight:bold;text-align:center}.bgr__table{min-width:100%;text-align:center}@media screen and (max-width: 335px){.bgr__table td{padding:0.35em 0.5em}}\n",""])},298:function(t,e,s){"use strict";var n=s(213);s.n(n).a},299:function(t,e,s){(t.exports=s(4)(!1)).push([t.i,".bgr__check-title{margin-bottom:0.5em}\n",""])},300:function(t,e,s){"use strict";var n=s(214);s.n(n).a},301:function(t,e,s){(t.exports=s(4)(!1)).push([t.i,".bgr__status{color:var(--color-text-disabled);margin:0.5em 0 1em}\n",""])},302:function(t,e,s){"use strict";var n=s(215);s.n(n).a},303:function(t,e,s){(t.exports=s(4)(!1)).push([t.i,".bgr__summary-title{margin-bottom:0.5em}\n",""])},304:function(t,e,s){"use strict";var n=s(216);s.n(n).a},305:function(t,e,s){(t.exports=s(4)(!1)).push([t.i,'.bgr__info{align-items:center;display:flex;justify-content:center}.bgr__info-icon{padding-right:0.5em}.hourglass-spin [class*="fa-hourglass"]{animation:showHide 4s steps(1) infinite;opacity:0}.hourglass-spin .fa-hourglass-half{animation-delay:1s}.hourglass-spin .fa-hourglass-start{animation-delay:0s}.hourglass-spin .fa-hourglass-end{animation-delay:2s}.hourglass-spin .fa-hourglass-end.fa-spin{animation:showHideSpin 4s linear infinite}@keyframes showHide{0%{opacity:1}25%{opacity:0}}@keyframes showHideSpin{0%{opacity:0}74.99%{opacity:0}75%{opacity:1;transform:rotate(0deg)}100%{opacity:1;transform:rotate(180deg)}}\n',""])},336:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.bot?s("main",{staticClass:"main-container"},[t.bot.nickname&&t.nicknames?s("h2",{staticClass:"title"},[t._v("\n\t\t"+t._s(t.bot.nickname)+"\n\t")]):s("h2",{staticClass:"title"},[t._v("\n\t\t"+t._s(t.bot.name)+"\n\t")]),t._v(" "),t.loading?s("h3",{staticClass:"subtitle"},[s("font-awesome-icon",{attrs:{icon:"spinner",size:"lg",spin:""}})],1):t._e(),t._v(" "),t.loading||"input"!==t.state?t._e():s("bgr-status",{attrs:{"used-keys":t.usedKeys,"unused-keys":t.unusedKeys},on:{reset:t.showReset,"show-unused":function(e){t.state="unusedKeys"},"show-used":function(e){t.state="usedKeys"}}}),t._v(" "),t.loading||"input"!==t.state||0===t.bot.bgrCount?t._e():s("div",{staticClass:"bgr__info"},[t.bot.isConnected?s("div",{staticClass:"bgr__info-icon"},[s("font-awesome-layers",{staticClass:"hourglass-spin"},[s("font-awesome-icon",{attrs:{icon:"hourglass-start"}}),t._v(" "),s("font-awesome-icon",{attrs:{icon:"hourglass-half"}}),t._v(" "),s("font-awesome-icon",{attrs:{icon:"hourglass-end"}}),t._v(" "),s("font-awesome-icon",{attrs:{icon:"hourglass-end",spin:""}})],1)],1):t._e(),t._v(" "),s("p",{staticClass:"subtitle"},[t._v(t._s(t.backgroundQueueText))])]),t._v(" "),s("keep-alive",["input"===t.state?s("bgr-input",{on:{check:t.onCheck}}):t._e(),t._v(" "),"check"===t.state?s("bgr-check",{attrs:{keys:t.keys,title:t.$t("bgr-check",{n:t.foundKeysCount}),bot:t.bot,confirming:t.confirming},on:{confirm:t.onConfirm,cancel:t.onCancel}}):t._e(),t._v(" "),"reset"===t.state?s("bgr-reset",{attrs:{title:t.$t("bgr-reset"),resetting:t.resetting},on:{reset:t.onReset,cancel:t.onCancel}}):t._e(),t._v(" "),"summary"===t.state?s("bgr-summary",{attrs:{keys:t.summaryKeys,title:t.$t("bgr-summary-success",{n:t.addedKeysCount})},on:{back:function(e){return t.$parent.back()}}}):t._e(),t._v(" "),"usedKeys"===t.state?s("bgr-summary",{attrs:{keys:t.usedKeys,title:t.$t("bgr-used-keys")},on:{back:function(e){t.state="input"}}}):t._e(),t._v(" "),"unusedKeys"===t.state?s("bgr-summary",{attrs:{keys:t.unusedKeys,title:t.$t("bgr-unused-keys")},on:{back:function(e){t.state="input"}}}):t._e()],1)],1):t._e()};n._withStripped=!0;var o=s(3),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bgr__check"},[t.noKeys?t._e():s("h3",{staticClass:"subtitle bgr__check-title"},[t._v("\n\t\t"+t._s(t.title)+"\n\t")]),t._v(" "),s("div",{staticClass:"form-item"},[s("bgr-keys",{attrs:{keys:t.keys}})],1),t._v(" "),s("div",{staticClass:"form-item"},[s("div",{staticClass:"form-item__buttons form-item__buttons--center"},[t.noKeys?t._e():s("button",{staticClass:"button button--confirm",on:{click:function(e){return t.$emit("confirm")}}},[t.confirming?s("font-awesome-icon",{attrs:{icon:"spinner",spin:""}}):s("span",[t._v(t._s(t.$t("confirm")))])],1),t._v(" "),s("button",{key:"cancel",staticClass:"button button--cancel",on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n\t\t\t\t"+t._s(t.$t("cancel"))+"\n\t\t\t")])])])])};r._withStripped=!0;var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bgr__keys"},[t.noKeys?s("span",{staticClass:"bgr__no-keys"},[t._v(t._s(t.$t("bgr-no-keys-detected")))]):s("table",{staticClass:"bgr__table"},[t._m(0),t._v(" "),t._l(t.keys,function(e,n){return s("tr",{staticClass:"key"},[s("td",[t._v(t._s(e))]),t._v(" "),s("td",[t._v(t._s(n))])])})],2)])};i._withStripped=!0;var a={name:"bgr-keys",props:{keys:Object},computed:{noKeys(){return 0===Object.keys(this.keys).length}}},c=(s(296),s(1)),u=Object(c.a)(a,i,[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",[this._v("Game")]),this._v(" "),e("th",[this._v("Key")])])}],!1,null,null,null);u.options.__file="src/components/BGR/Keys.vue";var l=u.exports,m={name:"bgr-check",components:{BgrKeys:l},props:{keys:Object,confirming:Boolean,title:String},computed:{noKeys(){return!Object.keys(this.keys).length}}},p=(s(298),Object(c.a)(m,r,[],!1,null,null,null));p.options.__file="src/components/BGR/Check.vue";var y=p.exports,d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bgr__input"},[s("div",{staticClass:"form-item"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.userInput,expression:"userInput"}],ref:"user-input",staticClass:"form-item__textarea",attrs:{cols:"70",rows:"15",placeholder:t.$t("bgr-keys-insert")+"\n\n"+t.$t("bgr-keys-insert-example"),spellcheck:"false"},domProps:{value:t.userInput},on:{input:function(e){e.target.composing||(t.userInput=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-item"},[s("div",{staticClass:"form-item__buttons form-item__buttons--center"},[s("button",{staticClass:"button button--confirm",on:{click:function(e){return t.$emit("check",t.keys,t.userInput)}}},[t._v("\n\t\t\t\t"+t._s(t.$t("check"))+"\n\t\t\t")])])])])};d._withStripped=!0;const f=/[0-9A-Z]{4,7}-[0-9A-Z]{4,7}-[0-9A-Z]{4,7}(?:(?:-[0-9A-Z]{4,7})?(?:-[0-9A-Z]{4,7}))?/,b=[":",";","|","-",","];var _={name:"bgr-input",data:()=>({userInput:"",userDelimiter:""}),computed:{keys(){const t=this.userInput.trim().split(/\r?\n/).map(t=>t.trim()).filter(t=>!!t);return this.parseKeys(t)}},mounted(){this.$refs["user-input"].focus()},methods:{detectKeyNamePair(t){if(!f.test(t))return{key:null,name:t};const e=f.exec(t)[0],s=t.indexOf(e),n=t.replace(e,"").trim();if(this.userDelimiter){const t=0===s?n.indexOf(this.userDelimiter):n.lastIndexOf(this.userDelimiter);return{key:e,name:n.slice(t,this.userDelimiter.length).trim()}}const o=n.charAt(0===s?0:n.length-1);return b.includes(o)?{key:e,name:n.slice(0===s?1:0,n.length-(0===s?0:1)).trim()}:{key:e,name:n}},parseKeys(t){const e={};for(let s=0;s<t.length;++s){const n=t[s],o=this.detectKeyNamePair(n);if(o.key&&o.name){e[o.key]=o.name;continue}const r=t[s+1],i=this.detectKeyNamePair(r);!i.name||i.key||o.name?i.name||!i.key||o.key?o.key&&(e[o.key]=o.key):e[i.key]=o.name:e[o.key]=i.name}return e}}},g=Object(c.a)(_,d,[],!1,null,null,null);g.options.__file="src/components/BGR/Input.vue";var h=g.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bgr__reset"},[s("h3",{staticClass:"subtitle"},[t._v("\n\t\t"+t._s(t.title)+"\n\t")]),t._v(" "),s("div",{staticClass:"form-item"},[s("div",{staticClass:"form-item__buttons form-item__buttons--center"},[s("button",{staticClass:"button button--cancel",on:{click:function(e){return t.$emit("reset")}}},[t.resetting?s("font-awesome-icon",{attrs:{icon:"spinner",spin:""}}):s("span",[t._v(t._s(t.$t("reset")))])],1),t._v(" "),s("button",{key:"cancel",staticClass:"button button--confirm",on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n\t\t\t\t"+t._s(t.$t("cancel"))+"\n\t\t\t")])])])])};v._withStripped=!0;var k={name:"bgr-reset",props:{resetting:Boolean,title:String}},C=Object(c.a)(k,v,[],!1,null,null,null);C.options.__file="src/components/BGR/Reset.vue";var w=C.exports,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.usedKeysCount||t.unusedKeysCount?s("div",{staticClass:"bgr__status form-item"},[s("div",{staticClass:"form-item__buttons form-item__buttons--center"},[s("button",{staticClass:"button",on:{click:function(e){return t.$emit("show-used")}}},[t._v("\n\t\t\t"+t._s(t.$t("bgr-used-keys-count",{count:t.usedKeysCount}))+"\n\t\t")]),t._v(" "),s("button",{staticClass:"button",on:{click:function(e){return t.$emit("show-unused")}}},[t._v("\n\t\t\t"+t._s(t.$t("bgr-unused-keys-count",{count:t.unusedKeysCount}))+"\n\t\t")]),t._v(" "),s("button",{staticClass:"button",on:{click:function(e){return t.$emit("reset")}}},[t._v("\n\t\t\t"+t._s(t.$t("reset"))+"\n\t\t")])])]):t._e()};K._withStripped=!0;var $={name:"bgr-status",props:{usedKeys:Object,unusedKeys:Object},computed:{unusedKeysCount(){return Object.keys(this.unusedKeys).length},usedKeysCount(){return Object.keys(this.usedKeys).length}}},x=(s(300),Object(c.a)($,K,[],!1,null,null,null));x.options.__file="src/components/BGR/Status.vue";var O=x.exports,j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bgr__summary"},[s("h3",{staticClass:"subtitle bgr__summary-title"},[t._v("\n\t\t"+t._s(t.title)+"\n\t")]),t._v(" "),s("div",{staticClass:"form-item"},[s("bgr-keys",{attrs:{keys:t.keys}})],1),t._v(" "),s("div",{staticClass:"form-item"},[s("div",{staticClass:"form-item__buttons form-item__buttons--center"},[t.noKeys?t._e():s("button",{staticClass:"button button--confirm",on:{click:t.copyKeys}},[t._v("\n\t\t\t\t"+t._s(t.$t("keys-copy"))+"\n\t\t\t")]),t._v(" "),s("button",{key:"back",staticClass:"button button--confirm",on:{click:function(e){return t.$emit("back")}}},[t._v("\n\t\t\t\t"+t._s(t.$t("back"))+"\n\t\t\t")])])])])};j._withStripped=!0;var R=s(183),S={name:"bgr-summary",components:{BgrKeys:l},props:{keys:Object,title:String},computed:{noKeys(){return 0===Object.keys(this.keys).length}},methods:{copyKeys(){let t="";for(const e in this.keys)this.keys.hasOwnProperty(e)&&(t+="".concat(this.keys[e],"\t").concat(e,"\n"));R(t),this.$info(this.$t("keys-copied"))}}},B=(s(302),Object(c.a)(S,j,[],!1,null,null,null));function E(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,n)}return s}function D(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}B.options.__file="src/components/BGR/Summary.vue";var I={name:"bot-bgr",components:{BgrCheck:y,BgrInput:h,BgrReset:w,BgrStatus:O,BgrSummary:B.exports},data:()=>({loading:!0,confirming:!1,resetting:!1,state:"input",unusedKeys:{},usedKeys:{},keys:{},summaryKeys:{}}),computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?E(s,!0).forEach(function(e){D(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):E(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}({},Object(o.c)({nicknames:"settings/nicknames"}),{bot(){return this.$store.getters["bots/bot"](this.$route.params.bot)},foundKeysCount(){return Object.keys(this.keys).length},addedKeysCount(){return Object.keys(this.summaryKeys).length},backgroundQueueText(){const t=this.$t("bgr-background-queue",{n:this.bot.bgrCount});return this.bot.isConnected?"".concat(t,".."):t}}),watch:{$route:{immediate:!0,async handler(){this.loading=!0;const{UnusedKeys:t,UsedKeys:e}=await this.loadBGR();this.unusedKeys=t,this.usedKeys=e,this.loading=!1}}},created(){this.bot||this.$router.replace({name:"bots"})},methods:{async loadBGR(){return(await this.$http.get("bot/".concat(this.bot.name,"/gamesToRedeemInBackground")))[this.bot.name]},onCheck(t){this.keys=t,this.state="check"},async onConfirm(){this.confirming=!0;try{const t=await this.$http.post("bot/".concat(this.bot.name,"/gamesToRedeemInBackground"),{gamesToRedeemInBackground:this.keys});this.state="summary",this.summaryKeys=t[this.bot.name]}finally{this.confirming=!1}},onCancel(){this.state="input"},showReset(){this.state="reset"},async onReset(){this.resetting=!0;try{await this.$http.del("bot/".concat(this.bot.name,"/gamesToRedeemInBackground")),this.unusedKeys={},this.usedKeys={}}finally{this.resetting=!1,this.state="input"}}}},P=(s(304),Object(c.a)(I,n,[],!1,null,null,null));P.options.__file="src/views/modals/BotBGR.vue";e.default=P.exports}}]);