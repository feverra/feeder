(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{176:function(t,e,s){"use strict";function n(t){return"en-US"!==t?"-".concat(t):""}s.d(e,"a",function(){return n})},177:function(t,e,s){"use strict";function n(t,e){const s=t.split(".").map(t=>parseInt(t,10)),n=e.split(".").map(t=>parseInt(t,10)),r=Math.max(s.length,n.length);for(let a=0;a<r;++a){const t=s[a]||0,e=n[a]||0;if(t!==e)return t>e?1:-1}return 0}s.d(e,"a",function(){return n})},180:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var n=s(6),r=s(177),a=s(176);async function i(t,e,s){const i=await async function(t,e,s){const i=Object(a.a)(s),m="https://github.com/JustArchiNET/ArchiSteamFarm/wiki/".concat(t).concat(i);if(!e)return m;const o=await n.e("www/send",{url:"https://api.github.com/repos/JustArchiNET/ArchiSteamFarm/releases?per_page=20"}),c=JSON.parse(o),u=c.findIndex(t=>Object(r.a)(e,t.tag_name)>-1);if(-1===u){const t=c[0].tag_name;return Object(r.a)(e,t),m}if(0===u)return m;const l=new Date(c[u-1].published_at),d=await n.e("www/send",{url:"https://github.com/JustArchiNET/ArchiSteamFarm/wiki/".concat(t).concat(i,"/_history")}),h=document.createElement("html");h.innerHTML=d;const p=Array.from(h.querySelectorAll(".js-wiki-history-revision")).map(t=>({releaseTime:new Date(t.querySelector("relative-time").getAttribute("datetime")),version:t.querySelector(".js-wiki-history-checkbox").value})).find(t=>{let{releaseTime:e}=t;return e<l});return p?"https://github.com/JustArchiNET/ArchiSteamFarm/wiki/".concat(t).concat(i,"/").concat(p.version):m}(t,e,s);return await n.e("www/send",{url:i})}},219:function(t,e,s){var n=s(311);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,s(5).default)("631379e5",n,!1,{})},310:function(t,e,s){"use strict";var n=s(219);s.n(n).a},311:function(t,e,s){(t.exports=s(4)(!1)).push([t.i,".commands{display:grid;grid-template-rows:1fr}.commands>div{min-height:0}.sign-input{cursor:pointer}.timestamp{margin-right:0.5em}\n",""])},342:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",{staticClass:"main-container main-container--fullheight commands"},[s("div",{staticClass:"container"},[s("div",{ref:"terminal",staticClass:"terminal",on:{click:t.focusInput}},[t._l(t.log,function(e){var n=e.type,r=e.time,a=e.message;return s("div",{staticClass:"terminal-message"},[t.timestamps?s("span",{staticClass:"terminal-message__time timestamp"},[t._v("["+t._s(r)+"]")]):t._e(),t._v(" "),s("span",{staticClass:"terminal-message__sign",class:"terminal-message__sign--"+n},[t._v(t._s("out"===n?">":"<"))]),t._v(" "),s("span",{staticClass:"terminal-message__content"},[t._v(t._s(a))])])}),t._v(" "),s("div",{staticClass:"terminal__input-wrapper"},[s("span",{staticClass:"terminal-message__sign sign-input",on:{click:t.sendCommand}},[t._v(">")]),t._v(" "),s("input",{ref:"terminal-input",staticClass:"terminal__input",attrs:{type:"text",spellcheck:"false"},domProps:{value:t.command},on:{input:function(e){t.command=e.target.value},keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendCommand(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:(e.preventDefault(),t.autocomplete(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.historyPrevious(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.historyNext(e)},function(e){return(e.type.indexOf("key")||76===e.keyCode)&&e.ctrlKey?(e.preventDefault(),t.clearTerminal(e)):null},function(e){return(e.type.indexOf("key")||65===e.keyCode)&&e.ctrlKey?(e.preventDefault(),t.jumpToStart(e)):null},function(e){return(e.type.indexOf("key")||75===e.keyCode)&&e.ctrlKey?(e.preventDefault(),t.removeAfterCursor(e)):null}]}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.autocompleteSuggestion,expression:"autocompleteSuggestion"}],staticClass:"terminal__input terminal__input--autocomplete",attrs:{type:"text",spellcheck:"false"},domProps:{value:t.autocompleteSuggestion},on:{input:function(e){e.target.composing||(t.autocompleteSuggestion=e.target.value)}}})])],2)])])};n._withStripped=!0;var r=s(3),a=s(0),i=s(180);function m(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,n)}return s}function o(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class c{constructor(t){this._cache=[],this._maxLength=t}get length(){return this._cache.length}get(t){return this._cache[t]||""}add(t){this.get(0)!==t&&(this._cache.unshift(t),this.save())}trim(){for(;this.length>this._maxLength;)this._cache.pop()}save(){a.c("command-history",this._cache)}load(){const t=a.a("command-history");t&&Array.isArray(t)&&(this._cache=t),this.trim()}}var u={name:"commands",metaInfo(){return{title:this.$t("commands")}},data:()=>({command:"",log:[],commandHistory:new c(20),commandHistoryIndex:-1,asfCommands:[],lastTabPressTime:0}),computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?m(s,!0).forEach(function(e){o(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):m(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}({},Object(r.c)({version:"asf/version",timestamps:"settings/timestamps"}),{commands(){return[...this.asfCommands.filter(t=>{let{command:e}=t;return"help"!==e}),{command:"commands",description:this.$t("terminal-commands")},{command:"help <Command>",description:this.$t("terminal-help")}]},commandsNames(){return this.commands.map(t=>t.command.split(" ")[0])},commandsParameters(){return this.commands.map(t=>{let{command:e}=t;return e.split(" ")}).map(t=>{let[e,...s]=t;return{command:e,params:s}}).reduce((t,e)=>{let{command:s,params:n}=e;return t[s]=n,t},{})},autocompleteSuggestion(){if(this.suggestedCommand)return this.command.replace(/./g," ")+this.suggestedCommand.substr(this.command.length);if(this.selectedCommand){if(!this.suggestedParameters||!this.suggestedParameters.length)return;if(this.suggestedParameterValue)return[this.command.replace(/./g," ")+this.suggestedParameterValue.slice(this.currentParameterValue.length),...this.suggestedParameters.slice(this.currentParameterIndex)].join(" ");const t=this.suggestedParameters.slice(this.currentParameterValue.length?this.currentParameterIndex:this.currentParameterIndex-1);return!t.length&&this.currentParameter&&t.push(this.currentParameter),this.command.replace(/./g," ")+(this.currentParameterValue.length?" ":"")+t.join(" ")}},suggestedCommand(){if(this.command)return this.commandsNames.find(t=>t.startsWith(this.command))},suggestedParameters(){return this.selectedCommand&&this.commandsParameters[this.selectedCommand]?this.commandsParameters[this.selectedCommand]:[]},currentParameterIndex(){return this.command.split(" ").length-1},currentParameter(){if(!this.suggestedParameters.length)return;const t=this.suggestedParameters[this.currentParameterIndex-1];if(t)return t;const e=this.suggestedParameters[this.suggestedParameters.length-1];return"s"===e.substr(-2,1)?e:void 0},currentParameterValue(){if(this.currentParameter&&"s"===this.currentParameter.substr(-2,1)){const t=this.command.split(" ")[this.currentParameterIndex].split(",");return t[t.length-1]}return this.command.split(" ")[this.currentParameterIndex]},suggestedParameterValue(){if(this.currentParameterValue&&this.currentParameterValue.length&&this.currentParameter)switch(this.currentParameter.toLowerCase()){case"<bot>":case"<bots>":case"<targetbot>":const t=[...this.$store.getters["bots/bots"].map(t=>t.name),"ASF"].find(t=>t.startsWith(this.currentParameterValue));return t||[...this.$store.getters["bots/bots"].map(t=>t.name),"ASF"].find(t=>t.toLowerCase().startsWith(this.currentParameterValue.toLowerCase()));case"<command>":return this.commandsNames.find(t=>t.startsWith(this.currentParameterValue));case"<modes>":return"transfer"===this.selectedCommand?["All","Background","Booster","Card","Emoticon","Foil","Gems","Unknown"].find(t=>t.toLowerCase().startsWith(this.currentParameterValue.toLowerCase())):"redeem^"===this.selectedCommand?["FD","FF","FKMD","SD","SF","SI","SKMG","V"].find(t=>t.toLowerCase().startsWith(this.currentParameterValue.toLowerCase())):void 0;case"<type>":if("input"!==this.selectedCommand)return;return["DeviceID","Login","Password","SteamGuard","SteamParentalCode","TwoFactorAuthentication"].find(t=>t.toLowerCase().startsWith(this.currentParameterValue.toLowerCase()));case"<settings>":if("privacy"!==this.selectedCommand)return;return["Private","FriendsOnly","Public"].find(t=>t.toLowerCase().startsWith(this.currentParameterValue.toLowerCase()))}},selectedCommand(){if(this.command)return this.commandsNames.find(t=>t===this.command.split(" ")[0])}}),watch:{log(){this.$nextTick(()=>{this.$refs.terminal.scrollTop=Math.max(0,this.$refs.terminal.scrollHeight-this.$refs.terminal.clientHeight)})}},async created(){this.commandHistory.load(),this.asfCommands=await this.loadCommands()},mounted(){this.$refs["terminal-input"].focus()},methods:{async sendCommand(){const t=this.command.trim();if(this.command="",!t)return;this.commandHistoryIndex=-1,this.commandHistory.add(t);const e={type:"in",time:"...",message:"..."};this.log.push({type:"out",time:this.getTimestamp(),message:t}),this.log.push(e);try{const n=await this.executeCommand(t);e.message=n.trim()}catch(s){e.message="Error: ".concat(s.message)}finally{e.time=this.getTimestamp()}},async executeCommand(t){switch(t.split(" ")[0]){case"commands":return this.$t("terminal-available-commands",{commands:this.commandsNames.join(", ")});case"help":return t.split(" ")[1]?this.commandHelp(t.split(" ")[1]):this.$t("terminal-help-text")}return this.$http.command(t)},getTimestamp:()=>(new Date).toLocaleTimeString(),commandHelp(t){const e=this.commands.find(e=>e.command.split(" ")[0]===t);return e?e.description:this.$t("terminal-no-help",{command:t})},focusInput(){("getSelection"in window?window.getSelection().toString():"selection"in document&&"Text"===document.selection.type?document.selection.createRange().text:null)||this.$refs["terminal-input"].focus()},autocomplete(){if(this.selectedCommand||(this.command=this.suggestedCommand||""),this.selectedCommand&&this.suggestedParameterValue){const t=this.command.split(" "),e=t[t.length-1].split(",");this.command=[...t.slice(0,-1),[...e.slice(0,-1),this.suggestedParameterValue].join(",")].join(" ")}else if(""===this.command){const t=Date.now();t-this.lastTabPressTime<=500&&(this.command="commands"),this.lastTabPressTime=t}},historyPrevious(){this.commandHistoryIndex+1<this.commandHistory.length&&(this.commandHistoryIndex++,this.command=this.commandHistory.get(this.commandHistoryIndex)),this.moveCursorToEnd()},historyNext(){this.commandHistoryIndex>0?(this.commandHistoryIndex--,this.command=this.commandHistory.get(this.commandHistoryIndex)):0===this.commandHistoryIndex&&(this.commandHistoryIndex=-1,this.command="")},clearTerminal(){this.log=[]},jumpToStart(){this.$refs["terminal-input"].setSelectionRange(0,0)},removeAfterCursor(){const t=this.$refs["terminal-input"].selectionStart;this.command=this.command.substr(0,t)},moveCursorToEnd(){const t=this.$refs["terminal-input"],e=this.command.length;t.setSelectionRange?setTimeout(()=>t.setSelectionRange(e,e),0):this.command=this.command},parseCommandsHTML(t){const e=document.createElement("html");e.innerHTML=t;const s=e.querySelector("h2 > a").parentElement.nextElementSibling;return Array.from(s.querySelectorAll("tbody tr")).map(t=>t.textContent.trim().split("\n")).map(t=>{let[e,s,n]=t;return{command:e,access:s,description:n}})},async fetchCommands(){const{locale:t}=this.$i18n,e=await Object(i.a)("Commands",this.version,t),s=this.parseCommandsHTML(e);return a.c("cache:asf-commands:".concat(t),{timestamp:Date.now(),commands:s}),s},async loadCommands(){const{locale:t}=this.$i18n,e=a.a("cache:asf-commands:".concat(t));if(e){const{timestamp:t,commands:s}=e;if(t>Date.now()-864e5)return s}return this.fetchCommands()}}},l=(s(310),s(1)),d=Object(l.a)(u,n,[],!1,null,null,null);d.options.__file="src/views/Commands.vue";e.default=d.exports}}]);